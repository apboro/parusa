# Пользователь

## Пользователь:

Пользователь (User) является базовой моделью для аутентификации, а также структурной единицей.

## Роли пользователя:

Смотри справочники.

## Профиль пользователя:

Профиль пользователя (UserProfile) содержит основную информацию о пользователе (User). Каждый профиль привязан только к
одному пользователю, а пользователь может иметь только один профиль. Удаляется вместе с пользователем, если удаление
пользователя допустимо.

Поля:

* `lastname` - фамилия
* `firstname` - имя
* `patronymic` - отчество
* `gender` - пол (может быть только `male`, `female`)

При необходимости, поля можно добавлять.

## Контакты пользователя:

Каждый пользователь (User) может иместь сколько угодно контактов (UserContact) одного или разных типов (ContactType).
Проверка на то, имеет ли пользователь необходимые обязательные контакты должно осуществляться в бизнес-логике
контроллера их добавляющего.

Каждый контакт должен иметь один из типов из справочника (см. справочники).

Также, контакты пользователя привязываются к должности пользователя (PartnerUserPosition) в организации-партнёре (
Partner). Таким образом,

Поведение связей:

* Блокируют удаление привязанного типа контакта.
* Автоматически удаляются при удалении пользователя, к которому они привязаны.
* При удалении, автоматически открепляются от должности пользователя
* При удалении должности пользователя, автоматически открепляется

Поля:

* `id` - уникальный идентификатор контакта
* `title` - название контакта, по умолчанию подставляется из типа контакта, но, возможно добавить измение
  пользователем (например, "мобильный основной", "мобильный дополнительный")
* `value` - непосредственно, значение контакта (номер телефона, email и т.д.)
* `additional` - дополнительная информация (например, добавочный номер)
* `comments` - дополнительные комментарии (например, "звонить только с 11 до 19")
* `type` - привязанный тип контакта (ContactType)
* `formatted` - (только для чтения) ссылка, сгенерированная для контакта по шаблону из типа контакта (link_pattern)
* `created_at` - дата создания, системное
* `updated_at` - дата изменения, системное
